version: "3.1"

stories:

# --- Stories cơ bản cho chào hỏi và kết thúc ---
- story: user greets and bot replies
  steps:
  - intent: greet
  - action: utter_greet

- story: user thanks and bot responds
  steps:
  - intent: thanks
  - action: utter_thanks

- story: user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

# --- Story: tra cứu điểm chuẩn theo ngành/năm ---
- story: user asks cutoff score for major and year
  steps:
  - intent: ask_ptit_cutoff_year_major
  - action: action_lookup_score

# --- Story: hỏi xu hướng điểm chuẩn ---
- story: user asks about trend of scores
  steps:
  - intent: ask_ptit_cutoff_trend
  - action: utter_ptit_cutoff_trend

# --- Story: hỏi phương thức tuyển sinh ---
- story: user asks different admission methods
  steps:
  - intent: ask_ptit_admission_methods
  - action: utter_ptit_admission_methods

# --- Story: hỏi thông tin chung về trường ---
- story: user asks for school info
  steps:
  - intent: ask_ptit_school_info
  - action: utter_ptit_school_info

# --- Story: hỏi các ngành và chỉ tiêu ---
- story: user asks about programs and majors
  steps:
  - intent: ask_ptit_programs
  - action: utter_ptit_programs

# --- Story: hỏi thông tin liên hệ ---
- story: user wants contact information
  steps:
  - intent: ask_ptit_contact
  - action: utter_ptit_contact

# --- Story: hỏi học phí ---
- story: user asks about tuition
  steps:
  - intent: ask_ptit_tuition
  - action: utter_ptit_tuition

# --- Story: hỏi học bổng ---
- story: user asks about scholarships
  steps:
  - intent: ask_ptit_scholarships
  - action: action_show_scholarships

# --- Story: hỏi hồ sơ cần chuẩn bị ---
- story: user asks documents required for admission
  steps:
  - intent: ask_ptit_documents_required
  - action: utter_ptit_documents_required

# --- Story: hỏi các mốc thời gian tuyển sinh ---
- story: user asks about deadlines
  steps:
  - intent: ask_ptit_deadlines
  - action: utter_ptit_deadlines

# --- Story: kết hợp hỏi nhiều intent trong 1 chuỗi ---
- story: user asks about school then tuition
  steps:
  - intent: ask_ptit_school_info
  - action: utter_ptit_school_info
  - intent: ask_ptit_tuition
  - action: utter_ptit_tuition

- story: user asks about programs then cutoff trends
  steps:
  - intent: ask_ptit_programs
  - action: utter_ptit_programs
  - intent: ask_ptit_cutoff_trend
  - action: utter_ptit_cutoff_trend

- story: user asks admission methods then deadlines
  steps:
  - intent: ask_ptit_admission_methods
  - action: utter_ptit_admission_methods
  - intent: ask_ptit_deadlines
  - action: utter_ptit_deadlines

- story: "user asks full process: admission -> documents -> contact"
  steps:
  - intent: ask_ptit_admission_methods
  - action: utter_ptit_admission_methods
  - intent: ask_ptit_documents_required
  - action: utter_ptit_documents_required
  - intent: ask_ptit_contact
  - action: utter_ptit_contact

# --- NEW STORIES: Conversation flows with follow-up ---

- story: user asks facility without campus then provides campus
  steps:
  - intent: ask_facility
  - action: action_show_facility
  - intent: ask_facility
    entities:
    - campus: "Hà Nội"
  - action: action_show_facility

- story: user asks facility and specifies campus immediately 
  steps:
  - intent: ask_facility
    entities:
    - campus: "Hà Nội"
  - action: action_show_facility

- story: user asks dorm without campus then provides campus
  steps:
  - intent: ask_dorm
  - action: action_show_dorm
  - intent: ask_dorm
    entities:
    - campus: "TP.HCM"
  - action: action_show_dorm

- story: user asks about majors then asks major detail
  steps:
  - intent: ask_major
  - action: utter_list_majors
  - intent: ask_major_detail
    entities:
    - major: "CNTT"
  - action: action_show_major_detail

- story: user checks admission chance with score and major
  steps:
  - intent: check_admission_chance
    entities:
    - score: "26"
    - major: "CNTT"
  - action: action_estimate_admission_chance

- story: user asks for major suggestion by score
  steps:
  - intent: suggest_major_by_score
    entities:
    - score: "27"
  - action: action_suggest_majors

- story: user compares two majors
  steps:
  - intent: compare_majors
    entities:
    - major: "CNTT"
  - action: action_compare_majors

- story: user asks about scholarships then wants details
  steps:
  - intent: ask_ptit_scholarships
  - action: action_show_scholarships

- story: user asks job opportunities for major
  steps:
  - intent: ask_job_opportunity
    entities:
    - major: "AI"
  - action: action_show_job_opportunities

- story: user asks about internships
  steps:
  - intent: ask_internship
  - action: action_show_internships

- story: user asks campus comparison
  steps:
  - intent: ask_campus_comparison
  - action: action_show_campus_comparison

- story: full flow - greet, ask majors, check admission chance
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ask_major
  - action: utter_list_majors
  - intent: check_admission_chance
    entities:
    - score: "28"
    - major: "CNTT"
  - action: action_estimate_admission_chance
  - intent: thanks
  - action: utter_thanks

- story: user asks about school, then facilities, then dorm
  steps:
  - intent: ask_ptit_school_info
  - action: utter_ptit_school_info
  - intent: ask_facility
  - action: action_show_facility
  - intent: ask_dorm
  - action: action_show_dorm

# --- Stories with affirm/deny for follow-up responses ---

- story: user asks facility, bot shows, user affirms understanding
  steps:
  - intent: ask_facility
  - action: action_show_facility
  - intent: affirm

- story: user denies and asks something else
  steps:
  - intent: ask_ptit_school_info
  - action: utter_ptit_school_info
  - intent: deny
  - intent: ask_ptit_contact
  - action: utter_ptit_contact

- story: user agrees to more info
  steps:
  - intent: ask_major
  - action: utter_list_majors
  - intent: affirm
  - intent: ask_major_detail
    entities:
    - major: "CNTT"
  - action: action_show_major_detail