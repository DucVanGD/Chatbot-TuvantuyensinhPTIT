version: "3.1"

rules:

# === CHÀO HỎI / CẢM ƠN / TẠM BIỆT ===
- rule: Respond to greeting
  steps:
  - intent: greet
  - action: utter_greet

- rule: Respond to thanks
  steps:
  - intent: thanks
  - action: utter_thanks

- rule: Respond to goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

# === TRẢ LỜI TRỰC TIẾP THEO INTENT ===
- rule: Handle cutoff score lookup
  steps:
  - intent: ask_ptit_cutoff_year_major
  - action: action_lookup_score

- rule: Handle score trend
  steps:
  - intent: ask_ptit_cutoff_trend
  - action: utter_ptit_cutoff_trend

- rule: Handle admission methods
  steps:
  - intent: ask_ptit_admission_methods
  - action: utter_ptit_admission_methods

- rule: Handle school info
  steps:
  - intent: ask_ptit_school_info
  - action: utter_ptit_school_info

- rule: Handle program list
  steps:
  - intent: ask_ptit_programs
  - action: utter_ptit_programs

- rule: Handle contact inquiries
  steps:
  - intent: ask_ptit_contact
  - action: utter_ptit_contact

- rule: Handle tuition inquiries
  steps:
  - intent: ask_ptit_tuition
  - action: utter_ptit_tuition

- rule: Handle scholarship inquiries
  steps:
  - intent: ask_ptit_scholarships
  - action: action_show_scholarships

- rule: Handle documents required inquiries
  steps:
  - intent: ask_ptit_documents_required
  - action: utter_ptit_documents_required

- rule: Handle deadlines inquiries
  steps:
  - intent: ask_ptit_deadlines
  - action: utter_ptit_deadlines

# === RULE XỬ LÝ KHI THIẾU ENTITY ===
# Note: Slot filling is better handled by forms or custom actions
# These conditional rules have been removed to fix validation errors

- rule: After greet, ask how can help
  steps:
  - intent: greet
  - action: utter_greet

# === NEW INTENT RULES ===
- rule: Handle bot identity
  steps:
  - intent: bot_identity
  - action: utter_bot_identity

- rule: Handle small talk
  steps:
  - intent: small_talk
  - action: utter_small_talk

- rule: Handle ask major
  steps:
  - intent: ask_major
  - action: utter_list_majors

- rule: Handle ask major detail
  steps:
  - intent: ask_major_detail
  - action: action_show_major_detail

- rule: Handle check admission chance
  steps:
  - intent: check_admission_chance
  - action: action_estimate_admission_chance

- rule: Handle suggest major by score
  steps:
  - intent: suggest_major_by_score
  - action: action_suggest_majors

- rule: Handle compare majors
  steps:
  - intent: compare_majors
  - action: action_compare_majors

- rule: Handle facility inquiry
  steps:
  - intent: ask_facility
  - action: action_show_facility

- rule: Handle dorm inquiry
  steps:
  - intent: ask_dorm
  - action: action_show_dorm

- rule: Handle campus comparison
  steps:
  - intent: ask_campus_comparison
  - action: action_show_campus_comparison

- rule: Handle job opportunity inquiry
  steps:
  - intent: ask_job_opportunity
  - action: action_show_job_opportunities

- rule: Handle internship inquiry
  steps:
  - intent: ask_internship
  - action: action_show_internships

- rule: Handle student life inquiry
  steps:
  - intent: ask_student_life
  - action: utter_student_life

- rule: Handle curriculum inquiry
  steps:
  - intent: ask_curriculum
  - action: action_show_major_detail

# === FALLBACK & KHÔNG HIỂU ===

- rule: Handle fallback when the bot does not understand
  steps:
  - intent: nlu_fallback
  - action: utter_default
  - action: action_listen